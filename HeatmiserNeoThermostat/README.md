Instructions for setting up a Heatmiser Neo Thermostat. I strongly recommend removing any spaces from your thermostats names before continuing - you can do this in the Heatmiser Neo app - otherwise you might have problems.

1) Turn on the NodeMCU by plugging in micro USB (to computer or USB charger) and you should see a WiFi Access Point called "NeoHubRelayBridge" appear (it might take a minute to appear). Connect to this access point (no password needed) and navigate to 192.168.4.1 (should be automatic on most phones). Here you should be able to configure the WiFi settings (using the scan is easiest and from this list, select your own WiFi network SSID (2.4GHz only) and add the wifi password (PSK).
2) After this is complete you can disconnect your phone from the NodeMCU and you should shortly see the NodeMCU connect to your router. The device runs much more reliably if you update the router so that this device is always given the same static/fixed IP address, this is a DHCP static IP reservation - without it you may find things stop working after IP addresses change. The same is true of the Neohub. You can also check the device IP address by looking in Network devices in Windows, and it should appear there (but may also take some time to appear)
3) Navigate to the IP address that the Node MCU has been given (take note of it) and you should see a VERY simple dashboard. Also take note of the MAC address listed at the top of the page.
4) Now navigate to https://account.smartthings.com (Samrtthings IDE) and log in. Go to the 'Device Handlers' link at the top and install the two device handlers (Bridge and Thermostat) into SmartThings. Copy and paste them from github into the SmartThings IDE as code, nothing else should need to be changed. Press Save and Publish. The github links for the two device handlers are [Bridge](https://raw.githubusercontent.com/cjcharles0/SmartThings/master/HeatmiserNeoThermostat/Device-NeoHubBridge) and [Thermostat](https://raw.githubusercontent.com/cjcharles0/SmartThings/master/HeatmiserNeoThermostat/Device-NeoThermostat)
5) Now go to the 'Devices' link at the top of the Smartthings IDE and click 'Create a Device' or 'Add new device'. You should fill in a name of "Neostat Bridge" (or similar), plus a DNI (Device Network ID) of the MAC address that you got from step 3 above. Ensure it uses the Device Handler called "Neo Hub Bridge" (bottom of the list of device handlers). Configure other settings as required (e.g. set the 'Location' to be your Smartthings Hub).
6) Open the new Neostat Bridge device on your phone and go into settings (top right). Here you should add the IP address for your NeoHub (get it from your router or somewhere similar), and the IP address of your NodeMCU (the IP address noted down above). I also suggest adding a Pre stat name of "Thermostat" in the settings, this will ensure that your thermostats all start with Thermostat (or similar) or finish with something if using post stat name - this will make them easier to identify in your device list, and helps Google Home/Alexa identify them as thermostats
7) Save settings on this device (normally Smartthings does this by default when you press the back arrow at the top, or after every field is updated).
8) Now go back to the NodeMCU dashboard and click the 'Configure Child Devices' button. This will now show a 'Create Child Zones' link which will create the Child Thermostat devices in ST, using the naming rules from step 6. If you check Smartthings you should see all of your Neostat devices now, and they should show the correct temperature (might take a few seconds to populate)
9) In case any devices do not automatically populate the temperature you can open the child device and press refresh.


If you have enjoyed/benefited from this Integration, donations would be much appreciated though not required at http://paypal.me/cjcharles . It has taken a fair while to pull together (and expense of buying new Thermostats!!)! :)
